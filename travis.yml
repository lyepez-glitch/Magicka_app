language: python

python:
  - "3.11"  # Specify the Python version

install:
  - pip install -r requirements.txt  # Install dependencies
#
before_script:
  - python manage.py migrate  # Apply migrations

script:
  - python manage.py test  # Run tests

deploy:
  provider: script
  script:
    - chmod +x deploy_render.sh  # Ensure the script is executable
    - bash deploy_render.sh  # Deploy to Render using Daphne
  on:
    branch: main  # Deploy from main branch
